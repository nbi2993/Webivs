function componentLog(e,n="info"){"undefined"!=typeof console&&"function"==typeof console[n]&&console[n]("[IVS App] "+e)}function debounce(n,t){let o;return function(...e){clearTimeout(o),o=setTimeout(()=>{clearTimeout(o),n.apply(this,e)},t)}}async function fetchTranslations(n){if(window.langSystem.translations[n])window.componentLog(`Translations for ${n} already loaded.`,"info");else{window.componentLog(`Attempting to fetch translations for: ${n} from ${window.langSystem.languageFilesPath}${n}.json`);try{var e=await fetch(""+window.langSystem.languageFilesPath+n+".json?v="+(new Date).getTime());if(window.componentLog(`Fetch response status for ${n}.json: ${e.status} - OK: `+e.ok),!e.ok)throw 404===e.status?new Error(`404 Not Found: Language file ${n}.json does not exist at `+e.url):new Error(`HTTP ${e.status} for ${n}.json: `+e.statusText);window.langSystem.translations[n]=await e.json(),window.componentLog(`Successfully loaded and parsed translations for ${n}. Keys loaded: `+Object.keys(window.langSystem.translations[n]).length)}catch(e){window.componentLog(`Failed to fetch or parse translations for ${n}: `+e.message,"error")}}}function applyTranslations(){let a=window.langSystem.currentLanguage,s=window.langSystem.translations[a]||window.langSystem.translations[window.langSystem.defaultLanguage];if(s){window.componentLog(`Applying translations for '${a}'. Total keys in active pack: `+Object.keys(s).length),document.documentElement.lang=a;let i=0;document.querySelectorAll("[data-lang-key]").forEach(e=>{var n,t=e.dataset.langKey,o=s[t];void 0!==o?("textContent"===(n=e.dataset.langTarget||"textContent")?e.textContent=o:"innerHTML"===n?e.innerHTML=o:e.setAttribute(n,o),i++):window.componentLog(`Key '${t}' not found for current language '${a}' or default. Element not translated.`,"warn")}),window.componentLog("Finished applying translations. Total elements updated: "+i)}else window.componentLog(`CRITICAL: No translations available for '${a}' or default language '${window.langSystem.defaultLanguage}'. DOM update skipped. This might indicate file loading issues.`,"error")}function updateLanguageButtonsUI(){window.componentLog("updateLanguageButtonsUI called. This function is typically handled by headerController for button states.","info"),window.IVSHeaderController&&"function"==typeof window.IVSHeaderController.updateLanguageButtonStates&&(window.IVSHeaderController.updateLanguageButtonStates(window.langSystem.currentLanguage),window.componentLog("Notified IVSHeaderController to update language button states."))}async function initializeLanguageSystem(){var e;window.langSystem.initialized?window.componentLog("Language system already initialized. Skipping re-initialization.","info"):(e=localStorage.getItem(window.langSystem.languageStorageKey)||(navigator.language||navigator.userLanguage).split("-")[0]||window.langSystem.defaultLanguage,window.componentLog(`Initial language determined: '${e}'. Attempting to load packs...`),await Promise.all([fetchTranslations(e),fetchTranslations(window.langSystem.defaultLanguage)]),await window.langSystem.setLanguage(e),window.langSystem.initialized=!0,window.componentLog(`Language system fully initialized. Current active language: '${window.langSystem.currentLanguage}'.`))}window.componentLog=componentLog,window.debounce=debounce,window.langSystem=window.langSystem||{translations:{},defaultLanguage:"vi",currentLanguage:"vi",languageStorageKey:"userPreferredLanguage_v3",languageFilesPath:"/lang/",isDebugMode:!0,initialized:!1},window.langSystem.setLanguage=async function(e){window.componentLog("Attempting to set language to: "+e),window.langSystem.translations[e]||await fetchTranslations(e),window.langSystem.translations[e]||(window.componentLog(`Cannot set language to '${e}', falling back to default '${window.langSystem.defaultLanguage}'. Requested lang pack not available.`,"warn"),e=window.langSystem.defaultLanguage,window.langSystem.translations[e])||await fetchTranslations(e),window.langSystem.translations[e]?(window.langSystem.currentLanguage=e,localStorage.setItem(window.langSystem.languageStorageKey,e),applyTranslations(),updateLanguageButtonsUI(),window.componentLog(`Language successfully set to: '${window.langSystem.currentLanguage}'.`)):window.componentLog("CRITICAL: Default language pack failed to load. Language system cannot function.","error")},window.changeLanguage=async function(t){if(window.componentLog("Initiating language change to: "+t),["en","vi"].includes(t))try{return await fetchTranslations(t),window.langSystem.currentLanguage=t,localStorage.setItem(window.langSystem.languageStorageKey,t),document.querySelectorAll("[data-lang-key]").forEach(e=>{var n=e.getAttribute("data-lang-key"),n=window.langSystem.translations[t][n];n&&("INPUT"===e.tagName||"TEXTAREA"===e.tagName?e.placeholder=n:e.textContent=n)}),window.componentLog("Successfully changed language to: "+t),!0}catch(e){throw window.componentLog("Error changing language: "+e.message,"error"),e}else window.componentLog("Invalid language code: "+t,"error")},"loading"===document.readyState?(document.addEventListener("DOMContentLoaded",initializeLanguageSystem),window.componentLog("DOMContentLoaded listener added for language system initialization.")):(initializeLanguageSystem(),window.componentLog("DOM already loaded, language system initializing immediately.")),"function"!=typeof window.componentLog&&(console.error("[IVSFabController] window.componentLog không được định nghĩa. Vui lòng đảm bảo utils.js được tải trước fabController.js."),window.componentLog=(e,n="error")=>console[n](e)),"function"!=typeof window.debounce&&(console.error("[IVSFabController] window.debounce không được định nghĩa. Vui lòng đảm bảo utils.js được tải trước fabController.js."),window.debounce=e=>e);let IVSFabController={isInitialized:!1,init(){this.isInitialized?window.componentLog("IVSFabController: Đã được khởi tạo. Bỏ qua khởi tạo lại.","info"):(window.componentLog("IVSFabController: Bắt đầu khởi tạo.","info"),this.cacheDOM(),this.fabContainer?(this.populateMenus(),this.bindEvents(),this.addRippleEffect(),this.isInitialized=!0,window.componentLog("IVSFabController: Khởi tạo hoàn tất.","info")):window.componentLog("IVSFabController: Không tìm thấy phần tử FAB container (#fab-container). Logic FAB sẽ không chạy.","warn"))},cacheDOM(){this.fabContainer=document.getElementById("fab-container"),this.scrollToTopBtn=document.getElementById("scroll-to-top-btn"),this.buttonsWithSubmenu=this.fabContainer?.querySelectorAll('button[aria-haspopup="true"]')||[],this.darkModeToggle=document.getElementById("darkModeToggle"),this.moonIcon=document.getElementById("moonIcon"),this.sunIcon=document.getElementById("sunIcon"),window.componentLog(`IVSFabController: FAB Container: ${!!this.fabContainer}, ScrollToTopBtn: ${!!this.scrollToTopBtn}, ButtonsWithSubmenu count: `+this.buttonsWithSubmenu.length,"info"),window.componentLog("IVSFabController: DarkModeToggle: "+!!this.darkModeToggle,"info")},addRippleEffect(){(this.fabContainer?.querySelectorAll(".fab-item")||[]).forEach(n=>{n.addEventListener("click",e=>{this.createRipple(e,n)})})},createRipple(e,n){let t=document.createElement("span");var o=n.getBoundingClientRect(),i=Math.max(o.width,o.height),a=e.clientX-o.left-i/2,e=e.clientY-o.top-i/2;t.style.cssText=`
            position: absolute;
            width: ${i}px;
            height: ${i}px;
            left: ${a}px;
            top: ${e}px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: scale(0);
            animation: ripple 0.6s linear;
            pointer-events: none;
        `,n.appendChild(t),setTimeout(()=>{t.remove()},600)},populateMenus(){var e=document.getElementById("contact-options"),n=document.getElementById("share-options");e&&(this.populateContactOptions(e),window.componentLog("IVSFabController: Đã điền nội dung menu liên hệ.")),n&&(this.populateShareOptions(n),window.componentLog("IVSFabController: Đã điền nội dung menu chia sẻ."))},populateContactOptions(e){let t=document.createDocumentFragment();[{key:"fab_call_hotline",text:"Hotline",href:"tel:+84896920547",icon:"fas fa-phone",color:"text-orange-500"},{key:"fab_send_email",text:"Email",href:"mailto:info@ivsacademy.edu.vn",icon:"fas fa-envelope",color:"text-red-500"},{key:"fab_chat_zalo",text:"Zalo",href:"https://zalo.me/1582587135739746654",icon:"fas fa-comment-dots",color:"text-blue-500"},{key:"fab_fanpage_fb",text:"Facebook",href:"https://www.facebook.com/hr.ivsacademy/",icon:"fab fa-facebook-f",color:"text-blue-600"},{key:"fab_chat_whatapps",text:"WhatsApp",href:"https://wa.me/84795555789/",icon:"fab fa-whatsapp",color:"text-green-500"}].forEach(e=>{var n=document.createElement("a");n.href=e.href,n.setAttribute("role","menuitem"),n.className="fab-submenu-item group w-full",n.setAttribute("data-lang-key",e.key),e.href.startsWith("http")&&(n.setAttribute("target","_blank"),n.setAttribute("rel","noopener noreferrer")),n.innerHTML=`<i class="${e.icon} fa-fw ${e.color}"></i><span>${e.text}</span>`,t.appendChild(n)}),e.appendChild(t)},populateShareOptions(element){let currentUrl=window.location.href,pageTitle=document.title,shares=[{text:"Facebook",icon:"fab fa-facebook-f",color:"text-blue-600",action:`window.open('https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(currentUrl)}', '_blank', 'noopener,noreferrer')`},{text:"(Twitter)",icon:"fab fa-x-twitter",color:"text-neutral-500",action:`window.open('https://twitter.com/intent/tweet?url=${encodeURIComponent(currentUrl)}&text=${encodeURIComponent(pageTitle)}', '_blank', 'noopener,noreferrer')`},{text:"LinkedIn",icon:"fab fa-linkedin",color:"text-blue-700",action:`window.open('https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(currentUrl)}&title=${encodeURIComponent(pageTitle)}', '_blank', 'noopener,noreferrer')`},{text:"Copy Link",icon:"fas fa-link",color:"text-gray-500",action:null}],fragment=document.createDocumentFragment();shares.forEach((s,index)=>{let btn=document.createElement("button"),btnId="share-action-"+index;btn.id=btnId,btn.setAttribute("role","menuitem"),btn.className="fab-submenu-item group w-full",btn.innerHTML=`<i class="${s.icon} fa-fw ${s.color}"></i><span>${s.text}</span>`,fragment.appendChild(btn),"Copy Link"===s.text?btn.addEventListener("click",()=>this.copyLinkToClipboard(currentUrl,btn)):s.action&&btn.addEventListener("click",()=>eval(s.action))}),element.appendChild(fragment)},copyLinkToClipboard(e,n){try{var t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),window.componentLog("Đã sao chép liên kết vào clipboard!"),this.showCopiedConfirmation(n)}catch(e){window.componentLog("Không thể sao chép liên kết: "+e,"error")}},showCopiedConfirmation(e){let n=document.createElement("div");n.textContent="Đã sao chép!",n.className="absolute z-50 bg-gradient-to-r from-green-500 to-green-600 text-white text-xs px-3 py-2 rounded-lg shadow-xl opacity-0 transition-all duration-300 pointer-events-none whitespace-nowrap backdrop-blur-sm border border-green-400/30";e=e.getBoundingClientRect();n.style.top=e.top-40+"px",n.style.left=e.left+e.width/2+"px",n.style.transform="translateX(-50%)",document.body.appendChild(n),setTimeout(()=>{n.classList.remove("opacity-0"),n.classList.add("opacity-100")},10),setTimeout(()=>{n.classList.remove("opacity-100"),n.classList.add("opacity-0"),n.addEventListener("transitionend",()=>{n.remove()},{once:!0})},2e3)},bindEvents(){var e;this.scrollToTopBtn&&(e=()=>{200<window.scrollY?(this.scrollToTopBtn.classList.remove("opacity-0","scale-90","pointer-events-none"),this.scrollToTopBtn.classList.add("opacity-100","scale-100")):(this.scrollToTopBtn.classList.add("opacity-0","scale-90","pointer-events-none"),this.scrollToTopBtn.classList.remove("opacity-100","scale-100"))},window.addEventListener("scroll",window.debounce(e,100),{passive:!0}),this.scrollToTopBtn.addEventListener("click",()=>window.scrollTo({top:0,behavior:"smooth"})),e(),window.componentLog("IVSFabController: Đã gắn sự kiện cho nút cuộn lên đầu trang.")),this.buttonsWithSubmenu&&this.buttonsWithSubmenu.forEach&&(this.buttonsWithSubmenu.forEach(n=>n.addEventListener("click",e=>{e.stopPropagation(),this.toggleSubmenu(n)})),window.componentLog("IVSFabController: Đã gắn sự kiện click cho các nút có submenu.")),this.darkModeToggle&&(this.darkModeToggle.addEventListener("click",()=>this.toggleDarkMode()),window.componentLog("IVSFabController: Đã gắn sự kiện cho nút chuyển đổi chế độ tối/sáng.")),document.addEventListener("click",e=>{this.fabContainer&&!this.fabContainer.contains(e.target)&&this.buttonsWithSubmenu&&this.buttonsWithSubmenu.forEach&&this.buttonsWithSubmenu.forEach(e=>this.closeSubmenu(e))}),window.componentLog("IVSFabController: Đã gắn sự kiện click toàn cục để đóng submenu FAB."),document.addEventListener("keydown",e=>{"Escape"===e.key&&(this.buttonsWithSubmenu&&this.buttonsWithSubmenu.forEach&&this.buttonsWithSubmenu.forEach(e=>this.closeSubmenu(e)),window.componentLog("IVSFabController: Đã đóng submenu FAB do nhấn phím Escape."))})},toggleSubmenu(n){var e="true"===n.getAttribute("aria-expanded");this.buttonsWithSubmenu&&this.buttonsWithSubmenu.forEach&&this.buttonsWithSubmenu.forEach(e=>{e!==n&&this.closeSubmenu(e)}),e?this.closeSubmenu(n):this.openSubmenu(n)},openSubmenu(e){let n=document.getElementById(e.getAttribute("aria-controls"));n&&(n.classList.remove("hidden","pointer-events-none"),requestAnimationFrame(()=>{n.classList.remove("opacity-0","scale-95","translate-y-2"),n.classList.add("opacity-100","scale-100","translate-y-0","show")}),e.setAttribute("aria-expanded","true"),window.componentLog("IVSFabController: Đã mở submenu cho nút: "+e.id))},closeSubmenu(n){let t=document.getElementById(n.getAttribute("aria-controls"));if(t){t.classList.remove("opacity-100","scale-100","translate-y-0","show"),t.classList.add("opacity-0","scale-95","translate-y-2");let e=()=>{t.classList.contains("opacity-0")&&t.classList.add("hidden","pointer-events-none"),t.removeEventListener("transitionend",e)};t.addEventListener("transitionend",e),n.setAttribute("aria-expanded","false"),window.componentLog("IVSFabController: Đã đóng submenu cho nút: "+n.id)}},toggleDarkMode(){document.body.classList.toggle("dark"),document.body.classList.contains("dark")?(this.moonIcon.classList.add("hidden"),this.sunIcon.classList.remove("hidden"),localStorage.theme="dark"):(this.moonIcon.classList.remove("hidden"),this.sunIcon.classList.add("hidden"),localStorage.theme="light"),window.componentLog("IVSFabController: Chuyển đổi chế độ: "+(document.body.classList.contains("dark")?"Tối":"Sáng"))}},rippleStyle=document.createElement("style");async function loadAndInject(n,e){let o=document.getElementById(e);if(!o)return window.componentLog(`Placeholder '${e}' not found.`,"error"),!1;try{var t=await fetch(n);if(!t.ok)throw new Error("HTTP "+t.status);var i,a=await t.text(),s=document.createElement("div"),l=(s.innerHTML=a,Array.from(s.querySelectorAll("script")));l.forEach(e=>e.parentNode?.removeChild(e)),o.innerHTML=s.innerHTML;for(i of l){let t=document.createElement("script");Array.from(i.attributes).forEach(e=>t.setAttribute(e.name,e.value)),i.src?(t.src=i.src,await new Promise((e,n)=>{t.onload=e,t.onerror=n,o.appendChild(t)})):(t.textContent=i.textContent,o.appendChild(t))}return!0}catch(e){return window.componentLog(`Failed to load ${n}: `+e.message,"error"),!1}}async function loadCommonComponents(){var e;window.componentLog("Initializing component sequence...","info");const n="footer-placeholder",t="/components/footer.html";for(e of[{id:"header-placeholder",url:"/components/header.html",controller:window.IVSHeaderController},{id:"fab-container-placeholder",url:"/components/fab-container.html",controller:window.IVSFabController}])document.getElementById(e.id)&&await loadAndInject(e.url,e.id)&&(e.controller&&"function"==typeof e.controller.init?(e.controller.init(),window.componentLog(`Controller for ${e.id} initialized.`,"info")):window.componentLog(`Controller for ${e.id} not found or init method missing.`,"warn"));document.getElementById(n)&&await loadAndInject(t,n),window.langSystem&&"function"==typeof window.langSystem.initializeLanguageSystem?window.componentLog("Language system (window.langSystem.initializeLanguageSystem) is expected to be self-initialized. Skipping explicit call here.","info"):window.componentLog("Language system (window.langSystem) not found or not ready.","warn"),window.componentLog("Component sequence complete.","info"),window.onPageComponentsLoadedCallback?.()}rippleStyle.textContent=`
    @keyframes ripple {
        to {
            transform: scale(4);
            opacity: 0;
        }
    }
`,document.head.appendChild(rippleStyle),window.IVSFabController=IVSFabController,document.addEventListener("DOMContentLoaded",()=>{var e;document.getElementById("fab-container")?(IVSFabController.init(),"dark"===(e=localStorage.theme)||!e&&window.matchMedia("(prefers-color-scheme: dark)").matches?(document.body.classList.add("dark"),IVSFabController.moonIcon.classList.add("hidden"),IVSFabController.sunIcon.classList.remove("hidden")):(document.body.classList.remove("dark"),IVSFabController.moonIcon.classList.remove("hidden"),IVSFabController.sunIcon.classList.add("hidden"))):window.componentLog("IVSFabController: Không tìm thấy FAB container trên DOMContentLoaded. Giả định tải động. Đảm bảo init() được gọi thủ công sau khi chèn.","warn")}),"function"!=typeof window.componentLog&&(console.error("[IVS LoadComponents] window.componentLog is not defined. Please ensure utils.js is loaded before loadComponents.js."),window.componentLog=(e,n="error")=>console[n](e)),"function"!=typeof window.debounce&&(console.error("[IVS LoadComponents] window.debounce is not defined. Please ensure utils.js is loaded before loadComponents.js."),window.debounce=e=>e);let IVSHeaderController={init(){window.componentLog("IVSHeaderController: Bắt đầu khởi tạo.","info"),this.cacheDOM(),this.header?(this.bindEvents(),this.updateActiveLinks(),this.onScroll(),this.mobilePanel&&(this.mobilePanel.classList.add("hidden","opacity-0"),this.mobileMenuContainer.classList.add("translate-x-full")),window.componentLog("IVSHeaderController: Khởi tạo hoàn tất.","info")):window.componentLog("IVSHeaderController: Không tìm thấy phần tử Header. Logic UI sẽ không chạy.","error")},cacheDOM(){this.header=document.getElementById("ivs-main-header"),this.mobilePanel=document.getElementById("ivs-mobile-menu-panel"),this.mobileOpenBtn=document.getElementById("mobile-menu-open-btn"),this.mobileCloseBtn=document.getElementById("mobile-menu-close-btn"),this.mobileBackdrop=document.getElementById("ivs-mobile-menu-backdrop"),this.mobileMenuContainer=document.getElementById("ivs-mobile-menu-container"),this.bottomNavMenuBtn=document.getElementById("bottom-nav-menu-btn"),this.langToggleButtons=document.querySelectorAll(".lang-toggle-btn"),this.langConfirmMessage=document.getElementById("lang-confirm-message"),this.submenuToggles=document.querySelectorAll(".mobile-submenu-toggle"),this.navLinks=document.querySelectorAll("a.desktop-nav-link, .dropdown-item, #ivs-mobile-main-nav a, a.bottom-nav-item"),window.componentLog(`IVSHeaderController: Header: ${!!this.header}, Mobile Panel: ${!!this.mobilePanel}, Open Btn: ${!!this.mobileOpenBtn}, Close Btn: ${!!this.mobileCloseBtn}, Backdrop: ${!!this.mobileBackdrop}, Mobile Menu Container: `+!!this.mobileMenuContainer,"info"),window.componentLog("IVSHeaderController: Bottom Nav Menu Btn: "+!!this.bottomNavMenuBtn,"info"),window.componentLog("IVSHeaderController: Language Toggle Buttons count: "+this.langToggleButtons.length,"info"),window.componentLog("IVSHeaderController: Language Confirm Message: "+!!this.langConfirmMessage,"info"),window.componentLog("IVSHeaderController: Submenu Toggles count: "+this.submenuToggles.length,"info")},bindEvents(){window.componentLog("IVSHeaderController: Bắt đầu gắn kết sự kiện.","info"),window.addEventListener("scroll",window.debounce(()=>this.onScroll(),50),{passive:!0}),window.componentLog("IVSHeaderController: Đã gắn sự kiện Scroll."),this.mobileOpenBtn&&(this.mobileOpenBtn.addEventListener("click",()=>this.toggleMobileMenu(!0)),window.componentLog("IVSHeaderController: Đã gắn sự kiện click cho mobile-menu-open-btn.")),this.mobileCloseBtn&&(this.mobileCloseBtn.addEventListener("click",()=>this.toggleMobileMenu(!1)),window.componentLog("IVSHeaderController: Đã gắn sự kiện click cho mobile-menu-close-btn.")),this.mobileBackdrop&&(this.mobileBackdrop.addEventListener("click",()=>this.toggleMobileMenu(!1)),window.componentLog("IVSHeaderController: Đã gắn sự kiện click cho mobile-menu-backdrop.")),this.bottomNavMenuBtn&&(this.bottomNavMenuBtn.addEventListener("click",()=>this.toggleMobileMenu(!0)),window.componentLog("IVSHeaderController: Đã gắn sự kiện click cho bottom-nav-menu-btn.")),document.addEventListener("keydown",e=>{"Escape"!==e.key||this.mobilePanel.classList.contains("hidden")||this.toggleMobileMenu(!1)}),window.componentLog("IVSHeaderController: Đã gắn sự kiện Keydown (Escape).","info"),this.submenuToggles.forEach((e,n)=>{e.addEventListener("click",()=>this.toggleSubmenu(e)),window.componentLog(`IVSHeaderController: Đã gắn sự kiện click cho Submenu Toggle ${n}.`)}),this.langToggleButtons.forEach(n=>{n.addEventListener("click",()=>{var e=n.dataset.lang;e&&this.setLanguage(e)}),window.componentLog(`IVSHeaderController: Đã gắn sự kiện click cho nút ngôn ngữ data-lang="${n.dataset.lang}".`)}),this.initMobileMenuLogoLogic(),this.initSwipeGesture(),window.componentLog("IVSHeaderController: Gắn kết sự kiện hoàn tất.","info")},setLanguage(n){window.componentLog("IVSHeaderController: Attempting to switch language to "+n,"info"),"function"==typeof window.changeLanguage?window.changeLanguage(n).then(()=>{this.langToggleButtons.forEach(e=>{e.classList.toggle("active",e.dataset.lang===n)}),this.langConfirmMessage&&(this.langConfirmMessage.textContent="vi"===n?"Đã chuyển sang Tiếng Việt":"Switched to English",this.langConfirmMessage.classList.remove("hidden"),setTimeout(()=>{this.langConfirmMessage.classList.add("hidden")},2e3))}).catch(e=>{window.componentLog("IVSHeaderController: Error switching language: "+e,"error")}):window.componentLog("IVSHeaderController: window.changeLanguage function not found","error")},updateLanguageButtonStates(n){this.langToggleButtons.forEach(e=>{e.dataset.lang===n?e.classList.add("active-language"):e.classList.remove("active-language")})},showLangConfirmation(){var e;this.langConfirmMessage&&(e=window.langSystem?.currentLanguage||"en",this.langConfirmMessage.textContent="vi"===e?"Ngôn ngữ đã đổi!":"Language changed!",this.langConfirmMessage.classList.remove("opacity-0","scale-90","pointer-events-none","hidden"),this.langConfirmMessage.classList.add("opacity-100","scale-100"),setTimeout(()=>{this.langConfirmMessage.classList.remove("opacity-100","scale-100"),this.langConfirmMessage.classList.add("opacity-0","scale-90"),this.langConfirmMessage.addEventListener("transitionend",()=>{this.langConfirmMessage.classList.contains("opacity-0")&&this.langConfirmMessage.classList.add("hidden","pointer-events-none")},{once:!0})},1500))},onScroll(){this.header&&this.header.classList.toggle("scrolled",10<window.scrollY)},toggleMobileMenu(e){this.mobilePanel&&this.mobileMenuContainer?e?(this.mobilePanel.classList.remove("hidden"),document.body.classList.add("menu-open"),setTimeout(()=>{this.mobilePanel.classList.remove("opacity-0"),this.mobileMenuContainer.classList.remove("translate-x-full")},10)):(this.mobilePanel.classList.add("opacity-0"),this.mobileMenuContainer.classList.add("translate-x-full"),setTimeout(()=>{this.mobilePanel.classList.add("hidden"),document.body.classList.remove("menu-open")},300)):window.componentLog("IVSHeaderController: Missing mobile menu elements","error")},toggleSubmenu(e){var n,t=e.nextElementSibling,o=e.querySelector("i.fa-chevron-down");t?(n=t.style.maxHeight&&"0px"!==t.style.maxHeight,o&&(o.style.transform=n?"rotate(0deg)":"rotate(180deg)"),e.setAttribute("aria-expanded",!n),t.style.maxHeight=n?"0px":t.scrollHeight+"px",window.componentLog(`IVSHeaderController: Submenu ${n?"đóng":"mở"} cho ${e.textContent.trim()}.`)):window.componentLog("IVSHeaderController: Nội dung submenu không tìm thấy.","warn")},updateActiveLinks(){let t=window.location.pathname.replace(/\/$/,"")||"/";this.navLinks.forEach(e=>{var n=(e.getAttribute("href")||"").replace(/\/$/,"")||"/";e.classList.remove("active"),(n===t||"/"!==n&&t.startsWith(n))&&e.classList.add("active")}),window.componentLog("IVSHeaderController: Đã cập nhật các liên kết đang hoạt động.")},initMobileMenuLogoLogic(){let e=document.querySelector(".menu-title"),n=document.getElementById("mobile-menu-logo");function t(){e.classList.add("hidden"),n.classList.remove("hidden")}function o(){e.classList.remove("hidden"),n.classList.add("hidden")}e&&n?(this.mobileOpenBtn&&this.mobileOpenBtn.addEventListener("click",function(){setTimeout(t,200)}),this.mobileCloseBtn&&this.mobileCloseBtn.addEventListener("click",function(){setTimeout(o,200)}),document.addEventListener("click",e=>{!this.mobilePanel||this.mobilePanel.classList.contains("hidden")||this.mobilePanel.contains(e.target)||"mobile-menu-open-btn"===e.target.id||setTimeout(o,200)}),document.addEventListener("keydown",e=>{"Escape"===e.key&&setTimeout(o,200)}),window.componentLog("IVSHeaderController: Đã khởi tạo logic logo menu mobile.","info")):window.componentLog("IVSHeaderController: Không tìm thấy menu title hoặc logo cho mobile menu.","warn")},initSwipeGesture(){let o=0,i=0,a=0,s=0;function l(){return window.innerWidth<=768}document.body.addEventListener("touchstart",e=>{l()&&1===e.touches.length&&(o=e.touches[0].clientX,i=e.touches[0].clientY)}),document.body.addEventListener("touchmove",e=>{l()&&1===e.touches.length&&(a=e.touches[0].clientX,s=e.touches[0].clientY)}),document.body.addEventListener("touchend",e=>{var n,t;l()&&(n=a-o,t=Math.abs(s-i),o>.7*window.innerWidth)&&n<-60&&t<80&&this.mobileOpenBtn&&this.mobilePanel&&this.mobilePanel.classList.contains("hidden")&&(this.mobileOpenBtn.click(),window.componentLog("IVSHeaderController: Swipe gesture detected - opening mobile menu.","info"))}),window.componentLog("IVSHeaderController: Đã khởi tạo swipe gesture cho mobile menu.","info")}};window.IVSHeaderController=IVSHeaderController,document.addEventListener("DOMContentLoaded",loadCommonComponents);